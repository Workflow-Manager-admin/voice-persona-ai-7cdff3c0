{"is_source_file": true, "format": "JavaScript", "description": "React component 'ChatPane' implementing a conversational chat interface with voice and emotion analysis, customizable persona, and text-to-speech playback. Handles real-time emotion detection, adaptive responses, and voice cloning integration.", "external_files": ["./ChatPane.css"], "external_methods": ["synthesizeVoiceWithUserProfile"], "published": ["handleVoiceProfileEnrolled"], "classes": [], "methods": [{"name": "analyzeEmotion(inputTextOrAudio)", "description": "Stub function performing mock emotion analysis based on user input text or audio, returning a simulated emotion profile.", "scope": "ChatPane", "scopeKind": "function"}, {"name": "generatePersonalityAndEmotionReply(userText, emotionResult, personaProfile)", "description": "Generates a contextually adaptive AI response that mimics the user's persona and reflects the detected emotion, with configurable tones and styles.", "scope": "ChatPane", "scopeKind": "function"}, {"name": "handleSend", "description": "Handles user message submission: triggers emotion analysis, updates conversation, generates AI reply, and invokes voice playback."}, {"name": "startListening", "description": "Initiates speech recognition via Web Speech API, capturing voice input and updating the message input."}, {"name": "stopListening", "description": "Stops ongoing speech recognition."}, {"name": "playBackHistory", "description": "Sequentially reads out the message history using the enrolled user voice or fallback TTS."}, {"name": "stopPlayback", "description": "Stops all ongoing audio playback, including speech synthesis."}, {"name": "synthesizeVoiceWithUserProfile", "description": "Produces speech audio for chat messages using the enrolled user voice profile if available, otherwise defaults to system TTS."}, {"name": "handleVoiceProfileEnrolled", "description": "Updates the component state with a new user voice profile after enrollment via modal interface."}, {"name": "ChatPane({ userVoiceProfile: propUserVoiceProfile, onNewEmotionResult })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "speakNext()", "scope": "ChatPane", "scopeKind": "function", "description": "unavailable"}], "calls": ["synthesizeVoiceWithUserProfile", "generatePersonalityAndEmotionReply", "analyzeEmotion", "setMessages", "setCurrentEmotion"], "search-terms": ["ChatPane", "emotion analysis stub", "persona and emotion response", "voice cloning", "text-to-speech", "react chat component", "real-time emotion feedback", "adaptive response", "voice recognition handler", "conversation history playback"], "state": 2, "file_id": 13, "knowledge_revision": 60, "git_revision": "ae970dab3fa66bb38fbde9fd4fb184d208e9488e", "revision_history": [{"28": ""}, {"50": "ea710cd682cefd5582dc77e1290bb1089a98c18b"}, {"52": "436dcb07cdfabd7690594ca609772761267a6882"}, {"55": "b62db291ac3b11a187176cdefc4ee77df05f6531"}, {"56": "ed1531b285fff99afdbc4fe321e56d2cc044eb68"}, {"57": "78a58b5bb8a86a95b1dcf9a6118a05086a279c39"}, {"58": "35f3f8b4746bc082691d77dd7f6b540c252fe682"}, {"59": "72263a4f056b6624112adedf113e44cbd8c590e0"}, {"60": "ae970dab3fa66bb38fbde9fd4fb184d208e9488e"}], "ctags": [{"_type": "tag", "name": "ChatPane", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^export default function ChatPane({ userVoiceProfile: propUserVoiceProfile, onNewEmotionResult })/", "language": "JavaScript", "kind": "function", "signature": "({ userVoiceProfile: propUserVoiceProfile, onNewEmotionResult })"}, {"_type": "tag", "name": "analyzeEmotion", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^  function analyzeEmotion(inputTextOrAudio) {$/", "language": "JavaScript", "kind": "function", "signature": "(inputTextOrAudio)", "scope": "ChatPane", "scopeKind": "function"}, {"_type": "tag", "name": "emotion", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^      emotion: emotionResult.emoji,$/", "language": "JavaScript", "kind": "property", "scope": "ChatPane.userMsg", "scopeKind": "class"}, {"_type": "tag", "name": "generatePersonalityAndEmotionReply", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^  function generatePersonalityAndEmotionReply(userText, emotionResult, personaProfile) {$/", "language": "JavaScript", "kind": "function", "signature": "(userText, emotionResult, personaProfile)", "scope": "ChatPane", "scopeKind": "function"}, {"_type": "tag", "name": "handleInputChange", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^          onChange={handleInputChange}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.onChange", "scopeKind": "class"}, {"_type": "tag", "name": "handleKeyDown", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^          onKeyDown={handleKeyDown}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.onKeyDown", "scopeKind": "class"}, {"_type": "tag", "name": "input", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^          value={input}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.value", "scopeKind": "class"}, {"_type": "tag", "name": "isListening", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^            onClick={isListening ? stopListening : startListening}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "isPlaying", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^            disabled={isPlaying}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.disabled", "scopeKind": "class"}, {"_type": "tag", "name": "isPlaying", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^            onClick={isPlaying ? stopPlayback : playBackHistory}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "isPlaying", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^          disabled={isPlaying}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.disabled", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^      role: \"user\",$/", "language": "JavaScript", "kind": "property", "scope": "ChatPane.userMsg", "scopeKind": "class"}, {"_type": "tag", "name": "speakNext", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^    async function speakNext() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "ChatPane", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^      text: userText,$/", "language": "JavaScript", "kind": "property", "scope": "ChatPane.userMsg", "scopeKind": "class"}, {"_type": "tag", "name": "userMsg", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^    const userMsg = {$/", "language": "JavaScript", "kind": "class", "scope": "ChatPane", "scopeKind": "class"}], "hash": "a5fade4005c6105b5bc838be684c467f", "format-version": 4, "code-base-name": "mimic_ai_frontend", "filename": "mimic_ai_frontend/src/components/ChatPane.js", "fields": [{"name": "emotion: emotionResult.emoji,", "scope": "ChatPane.userMsg", "scopeKind": "class", "description": "unavailable"}, {"name": "onChange={handleInputChange}", "scope": "ChatPane.onChange", "scopeKind": "class", "description": "unavailable"}, {"name": "onKeyDown={handleKeyDown}", "scope": "ChatPane.onKeyDown", "scopeKind": "class", "description": "unavailable"}, {"name": "value={input}", "scope": "ChatPane.value", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={isListening ? stopListening : startListening}", "scope": "ChatPane.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={isPlaying}", "scope": "ChatPane.disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={isPlaying ? stopPlayback : playBackHistory}", "scope": "ChatPane.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "role: \"user\",", "scope": "ChatPane.userMsg", "scopeKind": "class", "description": "unavailable"}, {"name": "text: userText,", "scope": "ChatPane.userMsg", "scopeKind": "class", "description": "unavailable"}]}