{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React component named ChatPane responsible for managing a real-time voice and text chat interface with features like emotion analysis, voice cloning playback, and conversation handling. It includes internal state management, stubbed emotion analysis, speech recognition, TTS playback with user voice profile integration, and user interface controls.", "external_files": ["./ChatPane.css"], "external_methods": ["window.speechSynthesis", "window.dispatchEvent", "window.CustomEvent", "window.alert"], "published": ["ChatPane", "analyzeEmotion", "handleSend", "startListening", "stopListening", "playBackHistory", "stopPlayback", "synthesizeVoiceWithUserProfile", "handleVoiceProfileEnrolled"], "classes": [], "methods": [{"name": "analyzeEmotion(inputTextOrAudio)", "description": "Stub function to simulate emotion analysis on input text or audio. Returns mock emotion data based on input content.", "scope": "ChatPane", "scopeKind": "function"}, {"name": "handleSend", "description": "Handles sending user message: appends user message to chat, simulates emotion detection, and echoes user's message in AI reply."}, {"name": "startListening", "description": "Initializes speech recognition, starts listening for voice input, and sets recognized transcript into input state."}, {"name": "stopListening", "description": "Stops ongoing speech recognition."}, {"name": "playBackHistory", "description": "Sequentially plays back chat messages in user's cloned voice if profile set, otherwise uses system TTS."}, {"name": "stopPlayback", "description": "Cancels all ongoing speech synthesis and stops playback."}, {"name": "synthesizeVoiceWithUserProfile", "description": "Plays message audio in user's cloned voice if profile exists, otherwise uses default speech synthesis."}, {"name": "handleVoiceProfileEnrolled", "description": "Updates the component state with a new voice profile object."}, {"name": "ChatPane({ userVoiceProfile: propUserVoiceProfile, onNewEmotionResult })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "speakNext()", "scope": "ChatPane", "scopeKind": "function", "description": "unavailable"}], "calls": ["setCurrentEmotion", "onNewEmotionResult", "setMessages", "setInput", "recognitionRef.current.start", "recognitionRef.current.stop", "window.speechSynthesis.speak", "setTimeout", "Audio", "fetch"], "search-terms": ["ChatPane", "emotion analysis stub", "voice cloning playback", "speech recognition React", "TTS profile", "mimic AI persona", "voice setup button", "chat message echo", "emotion feedback", "react useState useRef"], "state": 2, "file_id": 13, "knowledge_revision": 56, "git_revision": "ed1531b285fff99afdbc4fe321e56d2cc044eb68", "revision_history": [{"28": ""}, {"50": "ea710cd682cefd5582dc77e1290bb1089a98c18b"}, {"52": "436dcb07cdfabd7690594ca609772761267a6882"}, {"55": "b62db291ac3b11a187176cdefc4ee77df05f6531"}, {"56": "ed1531b285fff99afdbc4fe321e56d2cc044eb68"}], "ctags": [{"_type": "tag", "name": "ChatPane", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^export default function ChatPane({ userVoiceProfile: propUserVoiceProfile, onNewEmotionResult })/", "language": "JavaScript", "kind": "function", "signature": "({ userVoiceProfile: propUserVoiceProfile, onNewEmotionResult })"}, {"_type": "tag", "name": "analyzeEmotion", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^  function analyzeEmotion(inputTextOrAudio) {$/", "language": "JavaScript", "kind": "function", "signature": "(inputTextOrAudio)", "scope": "ChatPane", "scopeKind": "function"}, {"_type": "tag", "name": "emotion", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^      emotion: emotionResult.emoji,$/", "language": "JavaScript", "kind": "property", "scope": "ChatPane.userMsg", "scopeKind": "class"}, {"_type": "tag", "name": "handleInputChange", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^          onChange={handleInputChange}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.onChange", "scopeKind": "class"}, {"_type": "tag", "name": "handleKeyDown", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^          onKeyDown={handleKeyDown}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.onKeyDown", "scopeKind": "class"}, {"_type": "tag", "name": "input", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^          value={input}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.value", "scopeKind": "class"}, {"_type": "tag", "name": "isListening", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^            onClick={isListening ? stopListening : startListening}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "isPlaying", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^            disabled={isPlaying}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.disabled", "scopeKind": "class"}, {"_type": "tag", "name": "isPlaying", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^            onClick={isPlaying ? stopPlayback : playBackHistory}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "isPlaying", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^          disabled={isPlaying}$/", "language": "JavaScript", "kind": "field", "scope": "ChatPane.disabled", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^      role: \"user\",$/", "language": "JavaScript", "kind": "property", "scope": "ChatPane.userMsg", "scopeKind": "class"}, {"_type": "tag", "name": "speakNext", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^    async function speakNext() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "ChatPane", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^      text: userText,$/", "language": "JavaScript", "kind": "property", "scope": "ChatPane.userMsg", "scopeKind": "class"}, {"_type": "tag", "name": "userMsg", "path": "/home/kavia/workspace/code-generation/voice-persona-ai-7cdff3c0/mimic_ai_frontend/src/components/ChatPane.js", "pattern": "/^    const userMsg = {$/", "language": "JavaScript", "kind": "class", "scope": "ChatPane", "scopeKind": "class"}], "hash": "90a127884f2704c88eeca387dacff816", "format-version": 4, "code-base-name": "mimic_ai_frontend", "filename": "mimic_ai_frontend/src/components/ChatPane.js", "fields": [{"name": "emotion: emotionResult.emoji,", "scope": "ChatPane.userMsg", "scopeKind": "class", "description": "unavailable"}, {"name": "onChange={handleInputChange}", "scope": "ChatPane.onChange", "scopeKind": "class", "description": "unavailable"}, {"name": "onKeyDown={handleKeyDown}", "scope": "ChatPane.onKeyDown", "scopeKind": "class", "description": "unavailable"}, {"name": "value={input}", "scope": "ChatPane.value", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={isListening ? stopListening : startListening}", "scope": "ChatPane.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={isPlaying}", "scope": "ChatPane.disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={isPlaying ? stopPlayback : playBackHistory}", "scope": "ChatPane.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "role: \"user\",", "scope": "ChatPane.userMsg", "scopeKind": "class", "description": "unavailable"}, {"name": "text: userText,", "scope": "ChatPane.userMsg", "scopeKind": "class", "description": "unavailable"}]}